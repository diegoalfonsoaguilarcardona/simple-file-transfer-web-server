<!DOCTYPE html>
<html>
<head>
    <title>File Upload</title>
    <script>
        window.onload = function() {
            fetch('/listfiles')
                .then(response => response.json())
                .then(files => {
                    const fileList = document.getElementById('fileList');
                    files.forEach(file => {
                        const li = document.createElement('li');
                        const a = document.createElement('a');
                        a.href = file;
                        a.innerText = file;
                        // Set the download attribute to the file name
                        a.download = file.split('/').pop();
                        li.appendChild(a);
                        fileList.appendChild(li);
                    });
                })
                .catch(console.error);
        };
    </script>
</head>
<body>
    <h1>Upload File</h1>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file">
        <button type="submit">Upload</button>
    </form>

    <h2>Available Files</h2>
    <ul id="fileList"></ul>
</body>
</html>